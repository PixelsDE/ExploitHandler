package de.carina.exploit;

import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;

public class LoginGUI {
    public JPanel LoginGUIPanel;
    private JButton LoginButton;
    private JTextField UserNameField;
    private JTextField PasswordField;


    private String usernameInsert, passwordInsert;
    private Robot robot;
    public LoginGUI() throws Exception {

        robot = new Robot();
        UserNameField.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                usernameInsert = UserNameField.getText();
            }
        });

        UserNameField.addKeyListener(new KeyAdapter() {
            @Override
            public void keyTyped(KeyEvent e) {
                robot.keyPress(KeyEvent.VK_ENTER);
                usernameInsert = UserNameField.getText();
                    robot.keyPress(KeyEvent.VK_ENTER);


            }
        });
        PasswordField.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                passwordInsert = PasswordField.getText();
            }
        });
        PasswordField.addKeyListener(new KeyAdapter() {
            @Override
            public void keyTyped(KeyEvent e) {
                robot.keyPress(KeyEvent.VK_ENTER);

                passwordInsert = PasswordField.getText();
                robot.keyPress(KeyEvent.VK_ENTER);
            }
        });
        LoginButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (userCorrectOrExists(usernameInsert, passwordInsert)){
                    MainGUI.UserAuthLoginSystem = true;
                    Main.mainClass.createGUI();
                    Main.mainClass.MainGUI.loginFrame.dispose();
                }else{
                    JOptionPane.showConfirmDialog(null, "Username or Password wrong!", "ERROR!", JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE);
                }
            }
        });
    }
    public boolean userCorrectOrExists(String username, String password){
        for (Users user : Users.values()){
            if(user.getUsername().equalsIgnoreCase(username) && user.getPassword().equalsIgnoreCase(password)) return true;
        }
        return false;
    }




}
